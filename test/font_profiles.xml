<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<profile xmlns="http://www.verapdf.org/ValidationProfile" flavour="PDFUA_1">
    <details creator="custom script" created="2025-10-22T10:29:29.339201+02:00">
        <name>ISO 14289-1:2014 - 7.21 Fonts</name>
        <description>Combined profile for testing font related rules from ISO 14289-1:2014 - 7.21 Fonts</description>
    </details>
    <hash></hash>
    <rules>
        <rule object="Glyph" tags="major,machine,font">
            <id specification="ISO_14289_1" clause="7.21.8" testNumber="1"></id>
            <description>A PDF/UA compliant document shall not contain a reference to the .notdef glyph from any of the text showing
            operators, regardless of text rendering mode, in any content stream</description>
            <test>name != ".notdef"</test>
            <error>
                <message>The document contains a reference to the .notdef glyph</message>
                <arguments></arguments>
            </error>
            <references></references>
        </rule>
        <rule object="Glyph" tags="critical,machine,font">
            <id specification="ISO_14289_1" clause="7.21.7" testNumber="2"></id>
            <description>The Unicode values specified in the ToUnicode CMap shall all be greater than zero (0), but not equal to either U+FEFF or U+FFFE</description>
            <test>toUnicode == null || (toUnicode.indexOf("\u0000") == -1 &amp;&amp; toUnicode.indexOf("\uFFFE") == -1 &amp;&amp; toUnicode.indexOf("\uFEFF") == -1)</test>
            <error>
                <message>The glyph has Unicode value 0, U+FEFF or U+FFFE, which is invalid by Unicode standard</message>
                <arguments></arguments>
            </error>
            <references></references>
        </rule>
        <rule object="Glyph" tags="critical,machine,font">
            <id specification="ISO_14289_1" clause="7.21.7" testNumber="1"></id>
            <description>The Font dictionary of all fonts shall define the map of all used character codes to Unicode values, either via a ToUnicode entry,
                or other mechanisms as defined in ISO 14289-1, 7.21.7</description>
            <test>toUnicode != null</test>
            <error>
                <message>The glyph can not be mapped to Unicode</message>
                <arguments></arguments>
            </error>
            <references>
                <reference specification="ISO 14289-1:2014" clause="7.21.7"></reference>
            </references>
        </rule>
        <rule object="Glyph" tags="major,machine,font">
            <id specification="ISO_14289_1" clause="7.21.4.1" testNumber="2"></id>
            <description>Embedded fonts shall define all glyphs referenced for rendering within the conforming file.
                A font referenced solely in text rendering mode 3 is not rendered and is thus exempt from the requirements
                that impact the visual representation of the glyphs of a font. In all cases for TrueType fonts that are to
                be rendered, character codes shall be able to be mapped to glyphs according to ISO 32000-1:2008, 9.6.6.4
                without the use of a non-standard mapping chosen by the conforming processor</description>
            <test>renderingMode == 3 || isGlyphPresent == null || isGlyphPresent == true</test>
            <error>
                <message>Not all glyphs referenced for rendering are present in the embedded font program</message>
                <arguments></arguments>
            </error>
            <references>
                <reference specification="ISO 32000-1:2008" clause="9.3.6"></reference>
                <reference specification="ISO 32000-1:2008" clause="9.6.6.4"></reference>
            </references>
        </rule>
        <rule object="PDFont" tags="major,machine,font">
            <id specification="ISO_14289_1" clause="7.21.4.1" testNumber="1"></id>
            <description>The font programs for all fonts used for rendering within a conforming file shall be embedded within that file, as defined in ISO 32000-1:2008, 9.9</description>
            <test>Subtype == "Type3" || Subtype == "Type0" || renderingMode == 3 || containsFontFile == true</test>
            <error>
                <message>The font program is not embedded</message>
                <arguments></arguments>
            </error>
            <references>
                <reference specification="ISO 32000-1:2008" clause="9.9"></reference>
            </references>
        </rule>
        <rule object="PDType1Font" tags="minor,machine,font">
            <id specification="ISO_14289_1" clause="7.21.4.2" testNumber="1"></id>
            <description>If the FontDescriptor dictionary of an embedded Type 1 font contains a CharSet string, then it shall list the character names of all glyphs
            present in the font program, regardless of whether a glyph in the font is referenced or used by the PDF or not</description>
            <test>containsFontFile == false || fontName.search(/[A-Z]{6}\+/) != 0 || CharSet == null || charSetListsAllGlyphs == true</test>
            <error>
                <message>A CharSet entry in the Descriptor dictionary of a Type1 font incorrectly lists glyphs present in the font program</message>
                <arguments></arguments>
            </error>
            <references></references>
        </rule>
        <rule object="PDCIDFont" tags="minor,machine,font">
            <id specification="ISO_14289_1" clause="7.21.4.2" testNumber="2"></id>
            <description>If the FontDescriptor dictionary of an embedded CID font contains a CIDSet stream, then it shall identify all CIDs which are present in the font program,
            regardless of whether a CID in the font is referenced or used by the PDF or not</description>
            <test>containsFontFile == false || fontName.search(/[A-Z]{6}\+/) != 0 || containsCIDSet == false || cidSetListsAllGlyphs == true</test>
            <error>
                <message>A CIDSet entry in the Font descriptor does not correctly identify all glyphs present in the embedded font subset</message>
                <arguments></arguments>
            </error>
            <references></references>
        </rule>
    </rules>
    <variables></variables>
</profile>